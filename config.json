{"version":"1.3.3","schemaVersion":29,"minimumStudioVersion":"3.2.0","icon":"other","splash":"other","splashdata":{"img":"Splash.png","bg":"#0fb1ca"},"settings":{"router":{"mode":"single","animation":"off"},"theme":"default","push-notifications":{"android":{"enabled":true,"id":"321487242823","googleServiceJson":"google-services.json"},"ios":{"enabled":true,"voipEnabled":true},"wp":{"enabled":false}},"provisioning":{"enabled":false,"manifest":"","poll":2,"manual":false,"wifionly":true},"crashReporting":{"enabled":false,"androidEnabled":false,"iosEnabled":false,"splunkAndroidApiKey":"","splunkIosApiKey":"","splunkExtraData":""},"kioskMode":{"enabled":false},"singleInstance":{"enabled":true},"crosswalk":{"enabled":false},"logging":{"enabled":true,"bufferFrequency":100,"defaultRootLogLevel":"debug","defaultMaxFileSizeKilobyte":1000,"defaultMaxFiles":5,"appEnabled":true,"appUseDefault":true,"appRootLogLevel":"error","appMaxFileSizeKilobyte":1000,"appMaxFiles":5,"clientEnabled":true,"clientUseDefault":true,"clientRootLogLevel":"error","clientMaxFileSizeKilobyte":1000,"clientMaxFiles":5,"nativeEnabled":true,"nativeUseDefault":true,"nativeRootLogLevel":"error","nativeMaxFileSizeKilobyte":1000,"nativeMaxFiles":5},"loading-message":true,"minimise-on-back-button":false,"plugins":{"builtIn":{"cordova-plugin-whitelist@1.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-battery-status@1.2.4":{"override":false,"used":false,"enabled":false},"cordova-plugin-console@1.0.3":{"override":false,"used":true,"enabled":true},"cordova-plugin-contacts@2.1.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-device@1.1.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-device-motion@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-device-orientation@1.0.3":{"override":false,"used":false,"enabled":false},"cordova-plugin-file@4.2.0":{"override":false,"used":true,"enabled":true},"cordova-plugin-geolocation@2.2.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-globalization@1.0.3":{"override":false,"used":true,"enabled":true},"commontime-cordova-plugin-inappbrowser@1.6.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-network-information@1.2.1":{"override":false,"used":false,"enabled":false},"cordova-plugin-splashscreen@3.2.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-vibration@2.1.6-dev-ct-0.0.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-statusbar@1.0.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-camera@2.3.1":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-capture@1.4.1":{"override":false,"used":false,"enabled":false},"phonegap-plugin-barcodescanner@6.0.7":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.thumbnail@1.4.8":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.fileimporter@1.0.2":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-opener@1.0.13":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.beacon@1.0.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.notification@1.0.17":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.audio@0.9.23":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.media-properties@1.2.13":{"override":true,"used":false,"enabled":true},"com.commontime.cordova.splitscreen@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.preferences@0.0.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.authentication@1.0.8":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.urlhandler@1.1.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.securesettings@1.0.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.geofence@0.5.5":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-transfer@1.5.5":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.public.provisioning@0.0.13":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.insomnia@0.0.32":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.splunk-mint@1.0.3":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.kiosk@1.0.11":{"override":false,"used":false,"enabled":false},"cordova-android-movetasktoback@0.1.3":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.logging@1.0.24":{"override":false,"used":true,"enabled":true},"cordova-plugin-email":{"override":false,"used":true,"enabled":true},"cordova-android-crosswalk-webview@2.3.0":{"override":false,"used":false,"enabled":false},"cordova-plugin-emm-app-config@1.0.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.3":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.public.messaging@0.0.47":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.fileimporter@1.0.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.insomnia@0.0.33":{"override":false,"used":true,"enabled":true},"cordova-plugin-ionic-webview@1.1.16":{"override":false,"enabled":true,"used":true},"com.commontime.cordova.file-transfer@1.5.6":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.4":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-encryption@0.0.5":{"override":false,"used":true,"enabled":true},"cordova-plugin-screen-orientation@1.4.2":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.securesettings@1.0.3":{"override":false,"used":true,"enabled":true},"cordova-plugin-email-composer":{"override":false,"used":true,"enabled":true},"cordova-plugin-splashscreen@5.0.2":{"override":true,"used":true,"enabled":false},"com.commontime.cordova.securesettings@1.0.7":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.6":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.7":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-opener@1.0.14":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.notification@1.0.19":{"override":false,"used":true,"enabled":true},"cordova-plugin-camera@2.3.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.notification@1.0.21":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-transfer@1.5.7":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.11":{"override":false,"used":true,"enabled":true},"cordova-plugin-ionic-webview@1.1.17":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.4":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.insomnia@0.0.50":{"override":false,"used":true,"enabled":true},"cordova-plugin-wkwebview-engine@1.1.4":{"override":false,"enabled":true,"used":true},"cordova-plugin-wkwebview-file-xhr@2.1.1":{"override":false,"enabled":true,"used":true},"com.commontime.cordova.insomnia@0.0.51":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.settimeout@0.0.3":{"override":true,"used":true,"enabled":false},"com.commontime.cordova.thumbnail@1.4.10":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.12":{"override":false,"used":true,"enabled":true},"cordova-plugin-camera@2.3.5":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.thumbnail@1.4.14":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-opener@1.0.16":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v.2.3.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-transfer@1.5.8":{"override":false,"used":true,"enabled":true},"cordova-android-crosswalk-webview@2.4.0":{"override":false,"used":false,"enabled":false},"cordova-build-architecture@v1.0.4":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.file-encryption@0.0.15":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.settimeout@0.0.5":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.webviewchecker@1.0.5":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@r1.0.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.16":{"override":false,"used":true,"enabled":true},"cordova-plugin-console@1.1.0":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v.2.4.0":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.notification@1.0.22":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.5":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.0":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.7":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.insomnia@0.0.52":{"override":false,"used":false,"enabled":false},"https://github.com/commontime/com.commontime.cordova.volumecontrol@1.0.0":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@2.1.1-ct1":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.geofence@0.5.6":{"override":false,"used":false,"enabled":false},"com.commontime.cordova.thumbnail@1.4.15":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@2.1.2-ct1":{"override":true,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.2":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.6":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.8":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.18":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.10":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.11":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.12":{"override":true,"used":true,"enabled":false},"com.commontime.cordova.preferences@0.0.5":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.8":{"override":false,"used":true,"enabled":true},"cordova-plugin-statusbar@2.4.2":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@2.1.3-ct1":{"override":false,"used":true,"enabled":true},"https://github.com/commontime/cordova-ios-voip-push@1.0.9":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@2.1.4-ct1":{"override":false,"used":true,"enabled":true},"cordova-plugin-media-with-compression@2.1.5-ct1":{"override":false,"used":true,"enabled":true},"com.commontime.cordova.file-encryption@0.0.19":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.4.13":{"override":false,"used":true,"enabled":true},"phonegap-plugin-push@v2.5.18":{"override":false,"used":true,"enabled":true}},"customPlugins":{"cordova-plugin-splashscreen":{"id":"cordova-plugin-splashscreen","name":"cordova-plugin-splashscreen","version":"5.0.2","description":"Cordova Splashscreen Plugin","spec":"5.0.2","preferences":{"SplashMaintainAspectRatio":"true","SplashScreenDelay":"10000","FadeSplashScreen":"true","FadeSplashScreenDuration":"1000","ShowSplashScreenSpinner":"false"}},"Push Plugin":{"id":"Push Plugin","spec":"https://github.com/commontime/phonegap-plugin-push#2.5.18"}}},"insomnia":{"enabled":false,"startOnBoot":true,"battOp":true,"fgService":true,"fgServiceMain":"Clinical Messaging","fgServiceSub":"Waiting for messages...","appRestartService":true,"nativeSetTimeout":true,"backgroundAlarm":true},"orientation":"portrait","ionic":{"enabled":true},"wkwebview":{"enabled":true},"minWebviewVersion":{"version":"53.0.0"}},"language":{"defaultLocale":"en_GB","initialLanguage":"","useDeviceLocale":true},"pages":[{"start":true,"name":"Login","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"f63dfeb6-4003-4a8a-9ec9-802c8ee7f600","actions":[{"event":"onpageloaded","type":"call-function","data":{"name":"setupLoginForm"},"_auto_id_":"b304235e-1506-4d4f-9f76-de904cbb9baf"}]}],"content":[{"name":"main_content","type":"area","item-type":"static","content":[{"name":"login_watermark","type":"content","item-type":"html","content":"<svg viewBox=\"0 0 1346 2402\">\n  <path d=\"M1280.5,3386 C677.128911,3386 188,2896.87109 188,2293.5 C188,1690.12891 677.128911,1201 1280.5,1201 C1883.87109,1201 2373,1690.12891 2373,2293.5 C2373,2896.87109 1883.87109,3386 1280.5,3386 Z M1279.5,3317 C1829.29947,3317 2275,2871.29947 2275,2321.5 C2275,1771.70053 1829.29947,1326 1279.5,1326 C729.700532,1326 284,1771.70053 284,2321.5 C284,2871.29947 729.700532,3317 1279.5,3317 Z\"></path>\n  <path d=\"M1246,3188 C752.257434,3188 352,2802.96488 352,2328 C352,1853.03512 752.257434,1468 1246,1468 C1739.74257,1468 2140,1853.03512 2140,2328 C2140,2802.96488 1739.74257,3188 1246,3188 Z M1244.4407,3134 C1694.26314,3134 2058.91628,2783.2151 2058.91628,2350.5 C2058.91628,1917.7849 1694.26314,1567 1244.4407,1567 C794.618255,1567 429.965116,1917.7849 429.965116,2350.5 C429.965116,2783.2151 794.618255,3134 1244.4407,3134 Z\"></path>\n  <path d=\"M1229.5,3067 C821.085428,3067 490,2756.50947 490,2373.5 C490,1990.49053 821.085428,1680 1229.5,1680 C1637.91457,1680 1969,1990.49053 1969,2373.5 C1969,2756.50947 1637.91457,3067 1229.5,3067 Z M1229,3023 C1601.23992,3023 1903,2740.04396 1903,2391 C1903,2041.95604 1601.23992,1759 1229,1759 C856.760079,1759 555,2041.95604 555,2391 C555,2740.04396 856.760079,3023 1229,3023 Z\"></path>\n  <path d=\"M1236.5,2916 C884.418472,2916 599,2676.24848 599,2380.5 C599,2084.75152 884.418472,1845 1236.5,1845 C1588.58153,1845 1874,2084.75152 1874,2380.5 C1874,2676.24848 1588.58153,2916 1236.5,2916 Z M1236.5,2880 C1557.1013,2880 1817,2661.73882 1817,2392.5 C1817,2123.26118 1557.1013,1905 1236.5,1905 C915.898703,1905 656,2123.26118 656,2392.5 C656,2661.73882 915.898703,2880 1236.5,2880 Z\"></path>\n  <path d=\"M1224.5,2815 C932.61751,2815 696,2627.40731 696,2396 C696,2164.59269 932.61751,1977 1224.5,1977 C1516.38249,1977 1753,2164.59269 1753,2396 C1753,2627.40731 1516.38249,2815 1224.5,2815 Z M1225,2786 C1490.64896,2786 1706,2615.42049 1706,2405 C1706,2194.57951 1490.64896,2024 1225,2024 C959.351035,2024 744,2194.57951 744,2405 C744,2615.42049 959.351035,2786 1225,2786 Z\"></path>\n</svg>","expressions":{},"classes":"login-watermark","_auto_id_":"cf4ac4a0-c7b9-47da-96cd-20337ca3c669"},{"name":"login_content","type":"content","item-type":"html","content":"<div class=\"logo\">\n  <img src=\"user-assets/App Icon With Background - for App Icon).png\" />\n</div>\n<div class=\"title\">\n  <span class=\"b\">Clinical</span> Messaging\n</div>\n<div class=\"subtitle subtitle-1\">\n  Connecting you with colleagues.\n</div>\n<div class=\"subtitle subtitle-2\">\n  Anytime. Anywhere.\n</div>","expressions":{},"classes":"login-content","_auto_id_":"fdef3a59-b6cf-4466-885e-cb9821efc8ac"},{"name":"btnIconAbout","type":"button","item-type":"button","_auto_id_":"42c9a3f1-c0b3-4f9e-9d8c-d42376624770","content":"","theme":"default","actions":[{"event":"click","type":"go-to-page","data":{"name":"About","isConditional":false},"_auto_id_":"d990f0c7-fa75-4eee-bcef-fb229e2ab0ab"}],"expressions":{},"left-icon":"fa-info-circle"},{"name":"login_form","type":"messaging-common","item-type":"common-login-form","autoAppendDomainName":true,"username":"","hideUsername":false,"disableUsername":false,"logInLabel":"Sign In","expressions":{},"layer":"Clinical_Messaging","actions":[],"classes":"login-form","theme":"light","_auto_id_":"b8a02d3f-f099-45a2-a3da-52fcda5cbabd"}],"expressions":{},"classes":"login-page","_auto_id_":"a14d5d1e-ee57-4798-b45d-98eeece4dbc2"}]},{"start":false,"name":"Conversations","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"1ad84a58-53fb-42c8-92f7-a9bd5268fe52","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"if (!window.chatLayer.getCurrentUserJid()) {\n  \t// If we've got here are we are actually logged out we need to go to the\n    // login page\n    console.log(\"Got into the conversations page without being logged in, redirecting to the Login page...\");\n\t$fail();  \n} else {\n\t$success();  \n}"},"_auto_id_":"1a3e06dc-f492-431b-a930-3cb16b19b0f2","actions":[{"event":"fail","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"7bc2e44b-b367-4381-97a0-3cc35b461292"}]}]}],"content":[{"name":"main_content","type":"area","item-type":"scrollable","content":[{"name":"menu","type":"messaging-common","item-type":"common-slide-panel","content":[{"name":"menu_content","type":"area","item-type":"static","content":[{"name":"menu_header","type":"area","item-type":"static","content":[{"name":"current_user","type":"messaging-common","item-type":"common-user-display","showIcon":true,"expressions":{},"classes":"current-user","layer":"Clinical_Messaging","displayType":"full","label":"","_auto_id_":"6b8078b4-b3a3-4209-8e3c-695569268e57"}],"expressions":{},"classes":"menu-header","_auto_id_":"73b6a91f-3ba0-4189-bf82-ca5977df7ed0"},{"name":"menu_items","type":"area","item-type":"scrollable","content":[{"name":"about_btn","type":"button","item-type":"button","_auto_id_":"b894fd16-6164-42a3-930a-3d45aa2e55c0","content":"About","theme":"default","expressions":{},"actions":[{"event":"click","type":"go-to-page","data":{"name":"About","isConditional":false},"_auto_id_":"34313dfd-3170-47be-94fb-bb7927ed2b33"}],"classes":"menu-btn qa-btn"},{"name":"qa_btn","type":"button","item-type":"button","_auto_id_":"837b50c4-7323-45e2-9e82-b8f985f93313","content":"QA Data","theme":"default","expressions":{"show":"$store.preferences.qaMode === \"true\""},"classes":"menu-btn qa-btn","actions":[{"event":"click","type":"go-to-page","data":{"name":"QA","isConditional":false},"_auto_id_":"f56bf2e4-7120-41d6-bfd8-03047d5d7199"}]},{"name":"switch_theme_button","type":"button","item-type":"button","_auto_id_":"69df8fe1-09fd-4388-bf0b-cb27c615452e","content":"Switch Theme","theme":"default","expressions":{},"classes":"menu-btn qa-btn","actions":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"const theme  = document.querySelector(\"html\").getAttribute(\"theme\");\n\nif (theme) {\n  \n  window.chatLayer.setTheme(\"\");\n}\nelse {\n  window.chatLayer.setTheme(\"dark\");\n}"},"_auto_id_":"1d84cdd3-ce5a-4f30-af28-88bee1499072"}]}],"expressions":{},"classes":"menu-items","_auto_id_":"bbdca809-b45d-4104-8307-5521437ec59d"},{"name":"menu_footer","type":"area","item-type":"static","content":[{"name":"logout_btn","type":"button","item-type":"button","content":"Sign Out","theme":"default","actions":[{"event":"click","type":"common-log-out","data":{"layer":"Clinical_Messaging"},"_auto_id_":"f0125e16-322f-4c82-89f2-305272ea9bd0"}],"expressions":{},"classes":"menu-btn logout-btn","_auto_id_":"15d6ef46-3fae-4234-85e8-c7ac3c131515"}],"expressions":{},"classes":"menu-footer","_auto_id_":"2f357b85-c973-450d-bb41-0c7125c941a7"}],"expressions":{},"classes":"menu-content","_auto_id_":"eadb19b5-be0e-4df1-a389-0cbb077f7a0f"}],"layer":"Clinical_Messaging","menuWidth":"90vw","expressions":{"show":"$store.state.currentPage === \"Conversations\""},"classes":"menu","_auto_id_":"6c9337cd-b07b-4d5d-aa46-82bc9d096d4d"},{"name":"conversation_list","type":"chat","item-type":"cl-conversation-list","expressions":{},"layer":"Clinical_Messaging","classes":"conversation-list","actions":[{"event":"go-new-conversation","type":"go-to-page","data":{"name":"New_Conversation","isConditional":false},"_auto_id_":"3f0ff209-31f5-4d25-bb18-e8f7d0aecc14"},{"event":"go-chat","type":"go-to-page","data":{"name":"Chat","isConditional":false},"_auto_id_":"d49874e4-7905-4297-bc41-56f7f109298a"}],"_auto_id_":"ad483c28-7f09-4e89-9c12-c5effe943c53"}],"expressions":{},"classes":"conversations-page","_auto_id_":"1754daed-940c-4ec5-b63f-26e828b38f52"}]},{"start":false,"name":"New_Conversation","config":[],"content":[{"name":"main_content","type":"area","item-type":"scrollable","content":[{"name":"new_conversation","type":"chat","item-type":"cl-new-conversation","expressions":{},"classes":"new-conversation","layer":"Clinical_Messaging","actions":[{"event":"go-back","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"b26d8c6b-a542-4205-9262-9e292892a3be"},{"event":"go-chat","type":"go-to-page","data":{"name":"Chat","isConditional":false},"_auto_id_":"4b8be698-c469-468d-b6d4-bc8c972ca493"}],"allowSearch":true,"requireSearch":true,"showCountFrom":"{{$store.preferences.showParticipantCountFrom}}","_auto_id_":"a4d222dc-f7bc-49aa-be56-1a588baab48b"}],"expressions":{},"classes":"new-conversation-page","_auto_id_":"6d0ed4d4-4bff-410e-a7e6-86802465591f"}]},{"start":false,"name":"Chat","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"22de827b-37d0-4846-a568-a8fdbb9ddd24","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"if (!window.chatLayer.getCurrentUserJid()) {\n  \t// If we've got here are we are actually logged out we need to go to the\n    // login page\n    console.log(\"Got into the chat page without being logged in, redirecting to the Login page...\");\n\t$fail();  \n} else {\n\t$success();  \n}"},"_auto_id_":"92e2cf5f-7619-45fc-95d5-0c4648d115a7","actions":[{"event":"fail","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"af1957f8-e38f-446d-9d24-3b541402514f"}]}]}],"content":[{"name":"main_content","type":"area","item-type":"scrollable","content":[{"name":"chat_message_list","type":"chat","item-type":"cl-chat-message-list","expressions":{},"classes":"chat-message-list","layer":"Clinical_Messaging","actions":[{"event":"go-back","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"7cac93fe-502c-49ca-873d-ed0843f606be"},{"event":"go-info","type":"go-to-page","data":{"name":"Conversation_Info","isConditional":false},"_auto_id_":"2101593f-9f03-4cae-a9b6-e6d107d8be91"},{"event":"go-leave","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"36170461-0b52-4a0d-802d-a9007c6d26d4"},{"event":"go-end","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"ed148de6-4204-442f-a134-4c8d0f8f1b35"}],"_auto_id_":"ae8cf572-f341-40b5-a4a3-c07526491848"}],"expressions":{},"classes":"chat-page","_auto_id_":"630168c8-fbba-4622-bcc9-efb1ec110c84"}]},{"start":false,"name":"Conversation_Info","config":[],"content":[{"name":"main_content","type":"area","item-type":"scrollable","content":[{"name":"conversation_info","type":"chat","item-type":"cl-conversation-info","expressions":{},"classes":"conversation-info","layer":"Clinical_Messaging","actions":[{"event":"go-back","type":"go-to-page","data":{"name":"Chat","isConditional":false},"_auto_id_":"6af7d6c3-7955-468c-a0b5-6cc30ee1d6ca"},{"event":"go-add-contacts","type":"go-to-page","data":{"name":"Add_Contacts","isConditional":false},"_auto_id_":"d346b694-01d5-45eb-a4f4-2b03a21195d5"},{"event":"go-chat","type":"go-to-page","data":{"name":"Chat","isConditional":false},"_auto_id_":"2f551c2b-40b1-4b20-95fb-de2195728b11"}],"_auto_id_":"34476e0b-3ff4-4709-ba5e-f53089e87232"}],"expressions":{},"classes":"conversation-info-page","_auto_id_":"69f0aadc-b75a-4d7b-80c6-91d60fbfc90c"}]},{"start":false,"name":"Add_Contacts","config":[],"content":[{"name":"main_content","type":"area","item-type":"scrollable","content":[{"name":"add_conversation_contacts","type":"chat","item-type":"cl-add-conversation-contacts","expressions":{},"classes":"add-conversation-contacts","layer":"Clinical_Messaging","actions":[{"event":"go-back","type":"go-to-page","data":{"name":"Conversation_Info","isConditional":false},"_auto_id_":"c2af1229-1d52-4dcd-9001-a492caa51fd0"}],"allowSearch":true,"requireSearch":true,"showCountFrom":"{{$store.preferences.showParticipantCountFrom}}","_auto_id_":"f8ceb721-909a-48f5-8903-9de63d5de9bd"}],"expressions":{},"classes":"add-contacts-page","_auto_id_":"885799b6-3f8e-41de-90f9-23f2037955f7"}]},{"start":false,"name":"QA","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"75de99af-91e5-4126-ae82-337a09d3543a","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"let content = `\n  <div class=\"app-header\">\n    <div class=\"name\">${cti.store.schema.displayName}</div>\n    <div class=\"package-id\">${cti.store.schema.packageId}</div>\n    <div class=\"ver\">version: ${cti.store.schema.version}</div>\n  </div>\n`;\n\nif (cti.store.preferences.qaMode === \"true\") {\n  const preferenceKeys = [];\n  for (const id in cti.store.schema.metadata) {\n    preferenceKeys.push(cti.store.schema.metadata[id].key)\n  }\n  content += `\n\t<div class=\"section app-prefs\">\n      <div class=\"heading\">Preferences:</div>\n  `;\n  preferenceKeys.forEach(key => {\n    const hasValue = !!cti.store.preferences[key];\n    const prefValue = cti.store.preferences[key] || \"undefined\";\n    const prefClass = \"value\" + (hasValue ? \"\" : \" no-value\");\n    content += `\n      <div class=\"pref\">\n        <span class=\"key\">${key}: </span>\n        <span class=\"${prefClass}\">${prefValue}</span>\n      </div>\n    `;\n  });\n  content += `</div>`;\n}\n\nconst $appInfo = document.querySelector(\"#app_info\");\n$appInfo.innerHTML = content;"},"_auto_id_":"68ebf5bb-ec84-44f1-84b7-771738f88cdd"}]}],"content":[{"name":"main_content","type":"area","item-type":"scrollable","_auto_id_":"33465b2d-4ce9-4a0f-a798-fff77f9bb82f","content":[{"name":"close_btn","type":"button","item-type":"button","_auto_id_":"7c70a6ec-121e-47a7-a493-2e40c9412e7c","content":"","theme":"default","left-icon":"fa-times-circle","actions":[{"event":"click","type":"go-back","data":{},"_auto_id_":"0bb516d4-5b8c-44f4-8064-75de4bd52a94"}],"expressions":{},"classes":"close-btn"},{"name":"qa_data","type":"content","item-type":"html","_auto_id_":"c9e4dc6f-6622-46e0-ae23-1b9af94bd847","content":"<div id=\"app_info\"></div>","expressions":{},"classes":"qa-data"},{"name":"debugger","type":"messaging-common","item-type":"common-debugger","_auto_id_":"80b00f63-7da9-4759-80f4-b8adb09b8e85","expressions":{"show":"$store.preferences.qaMode === \"true\""},"classes":"debugger","layer":"Clinical_Messaging"},{"name":"button_1","type":"button","item-type":"button","_auto_id_":"65c6b855-904d-491c-9b4f-7b95867e1c45","content":"E-Mail Device Logs","theme":"default","actions":[{"event":"click","type":"email-logs","data":{"subject":"CM App Logs (v{{$store.schema.version}}-b{{$store.schema.buildInfo.build}})","includeArchivedLogs":true,"to":"testing@commontime.com","body":"Device logs for Clinical Messaging app '{{$store.schema.name}}'. App Version: '{{$store.schema.version}}'. Studio Build: '{{$store.schema.buildInfo.build}}'."},"_auto_id_":"3b234fa8-02e0-466f-a48b-a47d351d7ce3"}],"left-icon":"fa-envelope-o"}],"expressions":{},"classes":"qa-page"}]},{"start":false,"name":"About","config":[{"name":"Page Loaded Event","type":"event","item-type":"onpageloaded","_auto_id_":"04c7a26a-c97d-4979-bce3-10eb2e11f41f","actions":[{"event":"onpageloaded","type":"inline-function","data":{"sync":true,"code":"const server = document.getElementById(\"server\");\n\nif (server) {\n  \n  \t if (window.chatLayer && window.chatLayer.comms && window.chatLayer.comms.serverVersion) {\n\n        server.innerText = `Server version: ${window.chatLayer.comms.serverVersion.version}`;\n     \tserver.classList.remove(\"hidden\");\n     }\n     else {\n       \n        server.classList.add(\"hidden\");\n     }\n}"},"_auto_id_":"500ef15e-049a-413e-a508-e1e0baa111ee"}]}],"content":[{"name":"title_bar","type":"area","item-type":"title-bar","extends":{"type":"area","item-type":"row"},"content":[{"name":"btnBack","type":"button","item-type":"button","_auto_id_":"af034fe8-37ff-400b-a039-486d9708bc46","content":"","theme":"default","left-icon":"fa-chevron-left","actions":[{"event":"click","type":"go-back","data":{},"_auto_id_":"34fa51d8-017a-4970-b8ea-9da1e7d2bcab"}],"expressions":{}}],"_auto_id_":"6c7043e7-4ad3-477f-841a-92229b428778"},{"name":"scrlAbout","type":"area","item-type":"scrollable","content":[{"name":"ctLogo","type":"media","item-type":"image-viewer","_auto_id_":"c27ea1ba-cf2a-417e-b295-18d8b3adfae1","scaleImage":true,"maxWidth":200,"maxHeight":200,"fileName":"CommonTime.png","expressions":{}},{"name":"htmlAbout","type":"content","item-type":"html","_auto_id_":"f9935a96-282a-461a-ac28-956a43f97de9","content":"<p class=\"versions\">\n  <span>App Version: {{'$store.schema.version' | store}}</span><br>\n  <span>Build Number: {{'$store.preferences.appBuildNumber' | store}} - {{'$store.schema.buildInfo.build' | store}}</span><br>\n  <span id=\"server\" class=\"hidden\">Server Version: Please login first</span>\n</p>\n\n<p><strong>Clinical Messaging</strong> is a new breed of communication tool, designed and developed by CommonTime to facilitate multi-way conversations, broadcasts and alerts in high pressure environments.</p>\n\n<p>CommonTime develop market leading communication apps that deliver practical innovation to organisations across the world. Backed by over 20 years of experience, our secure & reliable solutions are vital to mobilising enterprise and government communication.</p>","expressions":{}}],"_auto_id_":"568017d0-177b-407f-a3e7-a84af0406b45","expressions":{}}]}],"actionflows":[{"name":"on_instance_ready","content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"window.chatLayer = $data;\nwindow.chatLayer.logger.setTypes([\"_all_\"]);\nwindow.chatLayer.comms.client._options.debug = true;\n$store.variables.debug = true;\nif (navigator && navigator.splashscreen) {\n\tnavigator.splashscreen.hide();\n}"},"_auto_id_":"67793cfa-a847-4e61-87d8-94c0ef441c02","actions":[]}]},{"name":"on_login","content":[{"event":"click","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"683f4fe7-e6d6-41fc-b29e-af7d0159fd13"}]},{"name":"on_logout","content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"// Clear any current notifications\nwindow.cordova.plugins.notification.clearAll();\n$success();"},"_auto_id_":"cb8dc142-8974-4275-9e50-d1b1468dbe27"},{"event":"click","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"c148459a-37dd-41d5-b05d-dfba42399639"}]},{"name":"on_connection_status","content":[{"event":"click","type":"inline-function","data":{"sync":true,"code":"const status = ($data.status || \"\").toLowerCase();\nif (status === \"connected\") document.body.classList.add(\"connected\");\nelse document.body.classList.remove(\"connected\");\n$success($data);"},"_auto_id_":"3e4bfa1c-b914-47d0-b4b1-5df3da627148"}]},{"name":"chat_notification","content":[{"event":"click","type":"call-actionflow","data":{"name":"stop_audio_vibrate"},"_auto_id_":"01acd20e-6cb6-4d51-aee2-8b56d386aee1"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"const {isForCurrentConversation, conversationTitle, messagePreview} = $data;\nconst isChatPage = cti.store.state.currentPage === \"Chat\";\nconst isForeground = cti.store.state.foreground === true;\nconst showDeviceNotification = !isForeground;\nconst showAppNotification = !isForCurrentConversation || !isChatPage;\nconst appName = cti.store.schema.displayName;\n// const notificationTitle = conversationTitle || appName;\n// const notificationText = messagePreview;\nconst notificationTitle = appName;\nconst notificationText = \"New Message Received\";\nconst data = {\n  showDeviceNotification,\n  showAppNotification,\n  notificationTitle,\n  notificationText\n};\n\n$success(data);"},"_auto_id_":"3dcd66b2-f0ce-4197-a610-57d49cced8cf"},{"type":"if","data":{},"_auto_id_":"d3eeff3e-a2fa-4a63-9b03-0e4d01300807","operations":[{"type":"value","content":"{{$data.showDeviceNotification}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true,"model":"","badge":"1"},"name":"device_notification","text":"{{$data.notificationText}}","title":"{{$data.notificationTitle}}"},"_auto_id_":"f2ca465d-e78b-4c3c-8c45-38602e8b693b"},{"type":"otherwise-if","data":{},"_auto_id_":"456a469a-960d-42dc-9a69-2ca33d7a6e20","operations":[{"type":"value","content":"{{$data.showAppNotification}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"show-notification","data":{"options":{"schedule":false,"dynamic":true},"name":"app_notification","title":"{{$data.notificationTitle}}","text":"{{$data.notificationText}}"},"_auto_id_":"fcad32e8-41bd-42c3-adc9-7557899b3ee5"},{"event":"click","type":"call-actionflow","data":{"name":"start_audio_vibrate"},"_auto_id_":"1a424d19-5183-4b02-9060-9830e4115ad5"},{"type":"otherwise","data":{},"_auto_id_":"dbe1b6fb-452e-46e3-b548-b9d9282174f7"},{"event":"click","type":"call-actionflow","data":{"name":"start_audio_vibrate"},"_auto_id_":"f58d350b-d32d-4546-b997-1f5ebe351fdf"},{"type":"end-if","data":{},"_auto_id_":"383ee077-a85d-425a-86d3-488ea2294f5d"}]},{"name":"start_audio_vibrate","content":[{"type":"if","data":{},"_auto_id_":"1a82e7bd-cb14-41ad-811f-ecae1ae1dd9d","operations":[{"type":"value","content":"{{$store.variables.currently_alerting}}","$selected":false},{"type":"operator","content":"!=","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"notification","fileName":"Clinical_Messaging_Notification.m4a"},"_auto_id_":"6c3467f7-3d7c-4298-8abd-531a70742551"},{"event":"click","type":"start-vibration","data":{"pattern":"none","customPattern":"","duration":"100","patternIterations":1,"continuous":false},"_auto_id_":"c92683b2-673d-4556-9107-d0a3c192d40c"},{"type":"end-if","data":{},"_auto_id_":"3b6678e5-10b8-48da-9671-79ff4cf865fc"}]},{"name":"stop_audio_vibrate","content":[{"type":"if","data":{},"_auto_id_":"f93ec850-09b7-4546-8820-ec29da3ea2fa","operations":[{"type":"value","content":"{{$store.variables.currently_alerting}}"},{"type":"operator","content":"!="},{"type":"value","content":"true"}]},{"event":"click","type":"stop-audio","data":{},"_auto_id_":"3be79339-ad97-4f24-b0ff-dee13040751c"},{"event":"click","type":"stop-vibration","data":{},"_auto_id_":"152b0fb7-117b-42af-a949-c6428a006e02"},{"type":"end-if","data":{},"_auto_id_":"05656244-4038-45d3-afe4-971665eab6aa"}]},{"name":"on_removed_from_conversation","content":[{"event":"click","type":"go-to-page","data":{"name":"Conversations"},"_auto_id_":"1c3ec6e0-4bac-4957-9579-898dd6bfd381"}]},{"name":"show_qa_page","content":[{"type":"if","data":{},"_auto_id_":"3be134f2-4c25-473d-8fad-292b340ac2fe","operations":[{"type":"value","content":"{{$store.preferences.qaMode}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false}]},{"event":"click","type":"go-to-page","data":{"name":"QA","isConditional":false},"_auto_id_":"2cbf0387-f74c-42eb-8a8f-e3753721bc7e"},{"type":"end-if","data":{},"_auto_id_":"bb523a24-555e-44f3-a13a-7551e9ac7a32"}]},{"content":[{"event":"click","type":"log","data":{"level":"debug","message":"{{$data}}"},"_auto_id_":"a0e79bee-2002-41f5-bdd9-a816ecc40fff"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"debugger;\nPushNotification.addToIgnoreList(function(){\n  console.log(\"Stored messageId: \");\n  $success($data);\n}, function(e){\n  console.error(e);\n  $fail();\n}, $data.conversation.createdTime);\n"},"_auto_id_":"a600e77b-9e2f-49fb-af35-1e53bf6b1f22"},{"event":"click","type":"log","data":{"level":"debug","message":"hello 1"},"_auto_id_":"0937dc9c-09a1-4dfc-8231-39f38edf2e11"},{"event":"click","type":"set-variable","data":{"name":"stored_message","value":"{{$data}}"},"_auto_id_":"94bc0c63-a187-4b1b-89f1-5b4382d30f36"},{"type":"if","data":{},"_auto_id_":"123699de-df9d-4843-9350-ad1e6e88c9f9","operations":[{"type":"value","content":"{{$data.conversation.priority}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"high","$selected":false}]},{"type":"if","data":{},"_auto_id_":"ea93ac27-904a-4a6a-afc9-e0fc0e049f6b","operations":[{"type":"value","content":"{{$store.variables.currently_alerting}}"},{"type":"operator","content":"!="},{"type":"value","content":"true"}]},{"event":"click","type":"stop-audio","data":{},"_auto_id_":"531de01a-e673-45c3-a485-24c636a5421a"},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"alarm","loop":false,"vibrate":true,"loopInterval":5,"loopCount":0,"fileName":"Clinical_Messaging_Notification.m4a","vibratePattern":"100,30,100,30,100,200,200,30,200,30,200,200,100,30,100,30,100","forceVibrate":true},"_auto_id_":"7cf668c9-04d5-44ae-8567-3ffc0b98a2ee"},{"type":"end-if","data":{},"_auto_id_":"1443ec06-5dbf-44a1-bb9c-8e5d58212a67"},{"type":"otherwise-if","data":{},"_auto_id_":"29eb829f-eec0-4ff4-bdab-fbcc737fd386","operations":[{"type":"value","content":"{{$data.conversation.priority}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"urgent","$selected":false}]},{"event":"click","type":"log","data":{"level":"debug","message":"hello 2"},"_auto_id_":"bc7aebbc-4ad5-40ad-9c35-72debde387d5"},{"event":"click","type":"stop-audio","data":{},"_auto_id_":"14ac7d62-40d6-431a-82bb-b1e138df45ba"},{"event":"click","type":"set-model","data":{"location":"$store.variables.currently_alerting","dataType":"boolean","value":"true"},"_auto_id_":"9451cc8e-7610-47f7-9d76-6d1c53cb286a"},{"type":"if","data":{},"_auto_id_":"31af066e-d3c4-4fec-80db-c45697253a18","operations":[{"type":"value","content":"{{$store.variables.in_alert}}"},{"type":"operator","content":"!="},{"type":"value","content":"true"}]},{"event":"click","type":"get-media-volume","data":{"streamId":"alarm"},"_auto_id_":"1d8c3ddc-286a-4cb1-8dab-8e013abaefdc"},{"event":"click","type":"set-variable","data":{"name":"stored_volume","value":"{{$data}}"},"_auto_id_":"756570d9-1712-4d29-b674-02f397b6e958"},{"event":"click","type":"set-variable","data":{"name":"in_alert","value":"true"},"_auto_id_":"1ac82130-3b39-41e6-82c3-f8f549b2bc0d"},{"type":"end-if","data":{},"_auto_id_":"6cdac5a4-ac80-48e1-8898-c720d3b645e3"},{"event":"click","type":"change-media-volume","data":{"streamId":"alarm","volumeLevel":"{{$store.variables.default_urgent_volume}}"},"_auto_id_":"e24b8755-183c-4fc1-b686-5e2b516e8eb2"},{"event":"click","type":"play-audio","data":{"static":true,"streamId":"alarm","loop":true,"vibrate":true,"loopInterval":2,"loopCount":0,"vibratePattern":"100,30,100,30,100,200,200,30,200,30,200,200,100,30,100,30,100","forceVibrate":true,"fileName":"pager_responder_alert.m4a"},"_auto_id_":"d44c38ef-6bb0-47d3-8d3b-3153bf3d1045"},{"type":"end-if","data":{},"_auto_id_":"9a52c50b-f774-492c-82f6-cdf4080d64cd"}],"name":"priority_conv_start"},{"content":[{"event":"click","type":"log","data":{"level":"debug","message":"{{$data}}"},"_auto_id_":"d0259090-9bfe-4495-830e-539f6d2649fd"},{"type":"if","data":{},"_auto_id_":"a153845b-7c35-4c17-8386-b9647768b2d2","operations":[{"type":"value","content":"{{$store.variables.currently_alerting}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"true","$selected":false},{"type":"connector","content":"&&","$selected":false},{"type":"value","content":"{{$data.pendingCount}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"0","$selected":false}]},{"event":"click","type":"set-model","data":{"location":"$store.variables.currently_alerting","dataType":"boolean","value":"false"},"_auto_id_":"698bc179-9415-4ae3-9232-b889dd816c18"},{"event":"click","type":"stop-audio","data":{},"_auto_id_":"09fdad9f-d3c2-4e54-bb35-5480205ad8bc"},{"event":"click","type":"change-media-volume","data":{"streamId":"alarm","volumeLevel":"{{$store.variables.stored_volume}}"},"_auto_id_":"b0c8074d-580d-4911-b127-d02c05fd9c9e"},{"event":"click","type":"set-variable","data":{"name":"in_alert","value":"false"},"_auto_id_":"fd61c01d-7ad9-46cb-9156-1d9711b92268"},{"event":"click","type":"inline-function","data":{"sync":true,"code":"if (window.cti.store.env.platform.name === \"android\") { \n\n  PushNotification.cancelAtFront(function() {\n    $success();\n  }, function() {\n    $fail();\n  });\n\n} else {\n  $success();\n}"},"_auto_id_":"46ad1439-e23f-4358-abe6-f328d854a183"},{"type":"end-if","data":{},"_auto_id_":"15313b31-206a-47a5-99b6-fe8c6dd73fbd"}],"name":"priority_conv_ack"},{"content":[{"type":"if","data":{},"_auto_id_":"b4e62649-b806-4b55-bee9-f8e87371d693","operations":[{"type":"value","content":"{{$store.state.currentPage}}","$selected":false},{"type":"operator","content":"==","$selected":false},{"type":"value","content":"Login","$selected":false}]},{"event":"click","type":"go-to-page","data":{"name":"Conversations","isConditional":false},"_auto_id_":"f4138b14-bb46-4272-abaa-794a339067e3"},{"type":"end-if","data":{},"_auto_id_":"fe3ffca3-4519-42f5-b63d-b2a578c3733b"}],"name":"on_auto_reconnected"}],"dataflows":[],"config":[{"name":"Keyboard Did Show Event","type":"event","item-type":"onkeyboarddidshow","_auto_id_":"38c3378c-6469-4d35-af5e-04ca849c8859","actions":[{"type":"inline-function","data":{"sync":true,"code":"var chatLayerInstance = window.CtChatLayer.getInstance(\"Clinical_Messaging\");\nchatLayerInstance.keyboardShown($data.keyboardHeight);"},"_auto_id_":"4fc45da7-b767-49be-b39b-58bbee69c31f"}]},{"name":"Keyboard Will Hide Event","type":"event","item-type":"onkeyboardwillhide","_auto_id_":"b338c6fc-ddc3-4316-8952-d631ecd306a1","actions":[{"type":"inline-function","data":{"sync":true,"code":"var chatLayerInstance = window.CtChatLayer.getInstance(\"Clinical_Messaging\");\nchatLayerInstance.keyboardHidden();"},"_auto_id_":"f8f97aec-9d4f-44d7-81f3-42a8d91b54e8"}]},{"name":"App Load Event","type":"event","item-type":"onappload","actions":[{"event":"onappload","type":"inline-function","data":{"sync":true,"code":"// TODO: remove this from the app when we have real data\n\nwindow.localConfig = {\n    fakeFetch: true,\n    fakeData: {\n        // conversations: true,\n        // contacts: true\n        // chat: true,\n    }\n};\n\nwindow.resetData = function () {\n  const layer = window.chatLayer;\n  layer.showWaitingMessage(\"Clearing local data and restarting...\");\n  layer.clearAllData().then(() => window.location.reload());\n}\n\n$success();"},"_auto_id_":"a1cb117d-5997-4e4f-afdf-51f585c8c744"},{"event":"onappload","type":"go-to-page","data":{"name":"Login","isConditional":false},"_auto_id_":"74f420f1-b92f-405f-943e-af2a61c3e665"}],"_auto_id_":"5a9288e4-7d94-47c8-bb33-6e5cad44cf05"},{"name":"OpenSans-Light","type":"style","item-type":"font-asset","fileName":"Chat_Font_OpenSans-Light.woff","_auto_id_":"1f04d575-3404-42a3-bfd6-2da193349b29"},{"name":"OpenSans-Regular","type":"style","item-type":"font-asset","fileName":"Chat_Font_OpenSans-Regular.woff","_auto_id_":"7a598e01-a866-4acd-9ba2-ca9dc0a69e6a"},{"name":"OpenSans-Semibold","type":"style","item-type":"font-asset","fileName":"Chat_Font_OpenSans-Semibold.woff","_auto_id_":"98ef818c-7a59-42a1-9c16-4349df655ece"},{"name":"OpenSans-Bold","type":"style","item-type":"font-asset","fileName":"Chat_Font_OpenSans-Bold.woff","_auto_id_":"4a944340-45c7-4c83-932d-ce5afef4f073"},{"name":"logo","type":"style","item-type":"image-asset","fileName":"chat_logo_generic.png","_auto_id_":"763fc20c-24d2-419c-a66d-a8e691dd70fb"},{"name":"notification_sound","type":"media","item-type":"audio-asset","_auto_id_":"f2c6c0eb-b566-433f-a2b7-2af59ab7eef6","fileName":"Clinical_Messaging_Notification.m4a"},{"name":"push_audio","type":"media","item-type":"audio-asset","_auto_id_":"eab7d97f-aa67-4135-b392-d5841d0b4797","fileName":"Clinical_Messaging_Push.caf"},{"name":"css_variables","type":"style","item-type":"css","content":"body {\n\n  --primary-color: #22b1c8;\n  --primary-font-color: #ffffff;\n\n  --secondary-color: #f2f2f2;\n  --secondary-font-color: #212121;\n  --secondary-border: 1px solid #dddddd;\n\n  --default-font-color: #212121;\n  --subtle-font-color: #828688;\n\n  --header-height: 75px;\n  --header-bg: #7b7e80;\n  --header-text: var(--primary-font-color);\n\n  --light-header-bg: #f2f2f2;\n  --light-header-text: var(--subtle-font-color);\n\n  --dark-header-bg: #212121;\n  --dark-header-text: #f2f2f2;\n\n  --list-bg: #fbfbfb;\n  --list-item-bg: #ffffff;\n  --list-item-border: 1px solid #dddddd;\n\n  --avatar-bg: #7b7e80;\n  --avatar-color: #ffffff;\n\n  --group-avatar-bg: var(--primary-color);\n  --group-avatar-color: var(--primary-font-color);\n\n  --conversation-unread-text: var(--default-font-color);\n  --conversation-unread-marker-bg: var(--primary-color);\n  --conversation-unread-marker-border: 1px solid var(--primary-color);\n\n  --conversation-read-text: var(--subtle-font-color);\n  --conversation-read-marker-bg: transparent;\n  --conversation-read-marker-border: var(--secondary-border);\n\n  --conversation-has-draft-color: #7e8080;\n  --conversation-has-error-color: #d93247;\n\n  --chat-message-bubble-sent-bg: var(--primary-color);\n  --chat-message-bubble-sent-text: var(--primary-font-color);\n\n  --chat-message-bubble-received-bg: #ebebeb;\n  --chat-message-bubble-received-from: var(--primary-color);\n  --chat-message-bubble-received-text: var(--default-font-color);\n\n  --button-primary-bg: var(--primary-color);\n  --button-primary-border: 1px solid var(--primary-color);\n  --button-primary-text: #ffffff;\n  --button-primary-ripple: var(--primary-color);\n\n  --button-secondary-bg: transparent;\n  --button-secondary-border: 1px solid var(--primary-color);\n  --button-secondary-text: var(--primary-color);\n  --button-secondary-ripple: var(--primary-color);\n\n  --button-dangerous-bg: #ce0a24;\n  --button-dangerous-border: #ce0a24;\n  --button-dangerous-text: #ffffff;\n  --button-dangerous-ripple: #ffffff;\n}\n\nbody.connected {\n\n  --header-bg: var(--primary-color);\n}\n\nct-login-form {\n\n  --button-primary-bg: var(--primary-color);\n  --button-primary-text: var(--primary-font-color);\n  --button-primary-border: 1px solid var(--primary-font-color);\n}\n\nct-alert-modal-manager {\n\n  --alert-info-bg: var(--primary-color);\n  --alert-info-text: var(--primary-font-color);\n\n  --alert-question-bg: var(--primary-color);\n  --alert-question-text: var(--primary-font-color);\n\n  --button-primary-bg: #7b7e80;\n  --button-primary-border: #7b7e80;\n  --button-primary-text: #fff;\n  --button-primary-ripple: #fff;\n}\n\nhtml[theme=\"dark\"] > body {\n\n    --base-color: #2f3136;\n    --secondary-color: #36393f;\n    --tertiary-color: #484c52;\n    --default-border-color: #474a4f;\n\n    --default-font-color: #fff;\n    --subtle-font-color: #828482;\n\n    --secondary-font-color: #616367;\n    --secondary-border: 1px solid var(--tertiary-border-color);\n\n    --tertiary-font-color: #fff;\n    --tertiary-border-color: #5b5e64;\n    --tertiary-placeholder-color: #7f8186;\n\n    --list-bg: var(--base-color);\n    --list-item-bg: var(--base-color);\n    --list-item-border: 1px solid var(--default-border-color);\n\n    --chat-list-bg-color: var(--base-color);\n    --chat-message-bubble-received-bg: var(--tertiary-color);\n    --chat-message-bubble-received-from: var(--primary-color);\n    --chat-message-bubble-received-text: var(--tertiary-font-color);\n\n    --light-header-bg: var(--secondary-color);\n    --light-header-text: var(--secondary-font-color);\n\n    --avatar-bg: var(--base-color);\n    --avatar-color: var(--default-font-color);\n\n    --group-avatar-bg: var(--base-color);\n    --group-avatar-color: var(--primary-font-color);\n\n    --default-bg-color-light: var(--tertiary-color);\n    --default-bg-color-light-font: var(--tertiary-font-color);\n\n    --select-border-color: var(--tertiary-border-color);\n    --select-placeholder-color: var(--tertiary-placeholder-color);\n\n    --action-sheet-border-color: var(--tertiary-border-color);\n    --action-sheet-button-bg: var(--tertiary-color);\n    --action-sheet-subtitle-color: var(--tertiary-placeholder-color);\n}","_auto_id_":"7cb7082c-edb4-4704-9f7c-9b64ffe07683"},{"name":"app_styles","type":"style","item-type":"css","content":"@font-face {\n  font-family: \"Open Sans\";\n  src: url(\"user-assets/Chat_Font_OpenSans-Light.woff?v=1.1.0\") format(\"woff\");\n  font-weight: 300;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: \"Open Sans\";\n  src: url(\"user-assets/Chat_Font_OpenSans-Regular.woff?v=1.1.0\") format(\"woff\");\n  font-weight: normal;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: \"Open Sans\";\n  src: url(\"user-assets/Chat_Font_OpenSans-Semibold.woff?v=1.1.0\") format(\"woff\");\n  font-weight: 600;\n  font-style: normal;\n}\n\n@font-face {\n  font-family: \"Open Sans\";\n  src: url(\"user-assets/Chat_Font_OpenSans-Bold.woff?v=1.1.0\") format(\"woff\");\n  font-weight: bold;\n  font-style: normal;\n}\n\nhtml, body {\n    /* prevent iOS overscroll */\n    position: fixed;\n    overflow: hidden;\n    width: 100%;\n    height: 100%;\n    background-color: var(--list-bg);\n}\n\nhtml, body, input, textarea, select, button {\n  font-size: 12px;\n}\n\nhtml, body, h1, h2, h3, h4, h5, h6, p, input, textarea, select, button {\n  font-family: \"Open Sans\", sans-serif;\n}\n\n#main_content {\n  position: relative;\n  padding: 0;\n  margin: 0;\n}\n\n#toast-container {\n  top: 0;\n  left: 0;\n  right: 0;\n}\n#toast-container .toast,\n#toast-container .toast:hover {\n  position: absolute;\n  background: rgba(0, 0, 0, 0.8);\n  background-size: 24px 24px;\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAATlBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////+QlxstAAAAGXRSTlMAECAwP0BQYHB/gI+Qn6CvsL/Az9Df4O/wU9PRWAAAATBJREFUeNrt1lGTgiAUBeCDRKWYCWV4/v8f3RlrhqZEgbsP+7Df+7negQuIf2mH1jrHhXO2PZSF7Y1fbjazSGMDE4JtsMc4bnIGW7TjLqeRoiyzWJXofmKmSWNFywItvlxY5CLMxwoxL6rQs0If80dWOeKlCawSGjxdWemKhWE1sxRwrOZiA4IWBgoMAAIFAmAoYtBRpMNIkRGeIh4U+gMFZsqIF1G8jeJBko+ybBXn3zjOWnqhSDbSyy/VxVg/BE9qZpW5kT5t8sc1GqpGoL5CzEdDZT7qyg7hCv1gpofGKsU8vUICc3iNpJy4QZrmjrlvsOXMLffeYMf08T3vufC+7wz2nT7yGnkSf4t3hTLqxne9LP8wKGSm9/gJhVTLyJ9QLPBlHs8NKpD3Za81yv0ASG4Lo6gTOU0AAAAASUVORK5CYII=\") !important;\n  background-repeat: no-repeat;\n  background-position: 20px center;\n  color: #ffffff;\n  border: 0;\n  border-radius: 0;\n  width: 100% !important;\n  padding: 15px 20px 15px 60px !important;\n  box-shadow: none;\n  z-index: 100;\n}\n#toast-container .toast {\n  opacity: 1 !important;\n  transform: translateY(0);\n}\n#toast-container .toast .toast-title {\n  font-weight: 600;\n}\n#toast-container .toast .toast-message {\n  font-weight: 300;\n}\n#toast-container .toast.ng-enter {\n  opacity: 1 !important;\n  transform: translateY(-100%);\n  transition: transform 0.3s ease-out;\n}\n#toast-container .toast.ng-enter.ng-enter-active {\n  opacity: 1 !important;\n  transform: translateY(0);\n}\n#toast-container .toast.ng-leave {\n  opacity: 1;\n  transform: translateY(0);\n  transition: transform 0.3s ease-out;\n  z-index: 0;\n}\n#toast-container .toast.ng-leave.ng-leave-active {\n  opacity: 1 !important;\n  transform: translateY(-100%);\n}\n\nbody.cti-preview #___ct_base_layer_modal_container > * {\n  top: 20px;\n  height: calc(100% - 20px);\n}\n\nbody div.app-container,\nbody div.page-container {\n  background-color: var(--list-bg); \n}","_auto_id_":"c2dc254f-fc75-47b3-bb7e-3c10b7f1f64a"},{"name":"page_specific_styles","type":"style","item-type":"css","content":"#main_content.login-page {\n  padding: 50px;\n  background: var(--primary-color);\n  color: var(--primary-font-color);\n  overflow: auto;\n}\n\n#main_content.login-page .login-watermark {\n  position: fixed;\n  bottom: -20px;\n  right: -20px;\n  margin: 0;\n  height: 100%;\n}\n\n#main_content.login-page .login-watermark svg {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  height: 100vh;\n  fill: rgba(255, 255, 255, 0.05);\n  pointer-events: none;\n}\n\n#main_content.login-page .login-content {\n  text-align: center;\n  font-weight: 300;\n  font-size: 12px;\n  margin: 0 0 20px 0;\n}\n\n#main_content.login-page .login-content .logo {\n  width: 75px;\n  height: 75px;\n  margin: 0 auto;\n  overflow: hidden;\n  transition: height 0.3s ease-out;\n}\n\n#main_content.login-page .login-content .logo.vanish {\n  height: 0;\n}\n\n#main_content.login-page .login-content .logo img {\n  display: block;\n  width: 75px;\n  height: 75px;\n}\n\n#main_content.login-page .login-content .title {\n  font-size: 26px;\n  margin: 5px 0 0 0;\n}\n\n#main_content.login-page .login-content .title .b {\n  font-weight: 600;\n}\n\n#main_content.login-page .login-content .subtitle {\n  font-weight: 300;\n  margin: 5px 0 0 0;\n}\n\n#main_content.login-page .login-content .subtitle.subtitle-1 {\n  color: rgba(255, 255, 255, 0.6);\n}\n\n#main_content.login-page .login-content .subtitle.subtitle-2 {\n  font-weight: 600;\n}\n\n#main_content.login-page .login-content {\n  text-align: center;\n}\n\n#main_content.login-page .login-form {\n  font-size: 16px;\n  font-weight: 300;\n  max-width: 400px;\n  margin: 0 auto;\n  opacity: 0;\n  transition: opacity 0.5s ease-out;\n}\n\n/* force full-height component UIs on iOS 10.3 */\n#main_content.conversations-page,\n#main_content.new-conversation-page,\n#main_content.chat-page,\n#main_content.conversation-info-page,\n#main_content.add-contacts-page {\n  display: flex;\n  flex-direction: column;\n}\n\n/* force full-height component UIs on iOS 10.3 */\n#main_content.conversations-page > .conversation-list,\n#main_content.new-conversation-page > .new-conversation,\n#main_content.chat-page > .chat-message-list,\n#main_content.conversation-info-page > .conversation-info,\n#main_content.add-contacts-page > .add-conversation-contacts {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  height: 100%;\n}\n\n#main_content.qa-page {\n  padding: 20px;\n}\n\n#main_content.qa-page #close_btn.md-button-container {\n  position: absolute;\n  top: 24px;\n  right: 20px;\n  margin: 0;\n}\n\n#main_content.qa-page #close_btn.md-button-container .btn {\n  border: 0;\n  padding: 0;\n}\n\n#main_content.qa-page #close_btn.md-button-container .btn:hover,\n#main_content.qa-page #close_btn.md-button-container .btn:active {\n  background: none;\n  box-shadow: none;\n}\n\n#main_content.qa-page #close_button.md-button-container .btn .fa {\n  font-size: 2em;\n}\n\n#main_content.qa-page .qa-data {\n  margin: 0 0 10px 0;\n}\n\n#main_content.qa-page .app-header .name { \n  font-size: 2em;\n  font-weight: 600;\n}\n\n#main_content.qa-page .app-header .package-id,\n#main_content.qa-page .app-header .ver { \n  opacity: 0.7;\n  font-size: 0.8em;\n  margin: 0 0 3px 0;\n}\n\n#main_content.qa-page .section { \n  margin: 10px 0 0 0;\n  padding: 10px;\n  border: 1px dotted var(--default-border-color, #ddd);\n  border-radius: 8px;\n}\n\n#main_content.qa-page .section .heading {\n  font-size: 1.333em;\n  font-weight: 600;\n  margin: 0 0 10px 0;\n}\n\n#main_content.qa-page .app-prefs .pref {\n  font-family: monospace;\n  margin: 5px 0 0 0;\n}\n\n#main_content.qa-page .app-prefs .key {\n  font-weight: 600;\n}\n\n#main_content.qa-page .app-prefs .no-value {\n  font-style: italic;\n}\n\n#title_bar {\n\tjustify-content: flex-start;\n\tbackground-color: var(--primary-color, #0fb1ca);\n}\n\n#title_bar div.md-button-container a {\n    background: var(--primary-color, #0fb1ca);\n    color: #fff;\n    border: none;\n}\n\n#btnIconAbout {\n\tposition: absolute;\n\tbottom: 10px;\n\tleft: 10px;\n}\n\n@media screen and (max-height: 480px) {\n    #btnIconAbout {\n        display: none;\n    }\n}\n\n#btnIconAbout a {\n\t\n\tbackground-color: transparent;\n    color: white;\n    border: none;\n}\n\n#btnIconAbout a span {\n\tfont-size: 30px;\n}\n\n#scrlAbout {\n    display: flex;\n    flex-direction: column;\n    background-color: var(--default-bg-color);\n    color: var(--default-font-color);\n}\n\n#scrlAbout image-viewer[name=\"ctLogo\"] div {\n    display: flex;\n    margin: 2vh auto;\n}\n\n#scrlAbout image-viewer[name=\"ctLogo\"] div img {\n    margin: auto;\n    height: 15vh;\n}\n\np.versions { \n    text-align: center;\n    color: var(--subtle-font-color);\n}\n","_auto_id_":"a6c0e13d-e46b-473a-b356-37901fec8627"},{"name":"menu_styles","type":"style","item-type":"css","content":"#main_content #menu {\n  position: absolute;\n  top: 0;\n  left: 0;\n  height: var(--header-height);\n  margin: 0 0 0 20px;\n  color: #ffffff;\n}\n\n#main_content #menu #menu_content {\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  border: none;\n  box-shadow: none;\n  padding: 0;\n}\n\n#main_content #menu #menu_content .md-button-container {\n  text-align: left;\n  margin: 0;\n}\n\n#main_content #menu #menu_content #menu_header {\n  flex: none;\n  background: var(--header-bg);\n  color: var(--primary-font-color);\n  border: none;\n  box-shadow: none;\n  padding: 65px 20px 20px 20px;\n}\n\n#main_content #menu #menu_content #menu_header .current-user {\n  --list-item-bg: transparent;\n  --list-item-border: none;\n  --avatar-tile-padding: 0;\n  --avatar-bg: var(--primary-font-color);\n  --avatar-color: var(--header-bg);\n  --default-font-color: var(--primary-font-color);\n  --subtle-font-color: var(--primary-font-color);\n}\n\n#main_content #menu #menu_content #menu_items {\n  display: flex;\n  flex-direction: column;\n  flex: 1 1 auto;\n  box-shadow: none;\n  padding: 0;\n  background: var(--list-bg);\n  border-top: var(--list-item-border);\n  color: var(--default-font-color);\n}\n\n#main_content #menu #menu_content #menu_footer {\n  flex: none;\n  background: var(--list-bg);\n  border: var(--list-item-border);\n  border-width: 1px 0 0 0;\n  box-shadow: none;\n  padding: 0;\n}\n\n#main_content #menu #menu_content .menu-btn {\n  display: block;\n  border: 0;\n  padding: 20px;\n  text-align: left;\n  background: var(--list-bg);\n  color: var(--default-font-color);\n}\n\n#main_content #menu #menu_content #menu_items .menu-btn {\n  border-bottom: var(--list-item-border);\n  background: var(--list-bg);\n  color: var(--default-font-color);\n}\n\n/* special case for CTI preview */\nbody.cti-preview #main_content #menu #menu_content {\n  margin: 20px 0 0 0;\n  height: calc(100% - 20px);\n}\n#version_block {\n  background: #f2f2f2;\n  color: #666;\n  padding: 0 10px;\n  text-align: right;\n  height: 30px;\n  line-height: 30px;\n  border-top: solid 1px #DDD;\n}","_auto_id_":"96de0124-e65c-489a-8026-a7273e7810e0"},{"name":"Clinical_Messaging","type":"chat","item-type":"chatlayer","clConfig":{"xmpp":{"endpoint":"{{$store.preferences.xmppUrl}}","user":{"domain":"{{$store.preferences.xmppDomain}}","userPersistentResource":false,"forceLowercaseJid":true,"sendAppIdentifier":false,"appIdentifier":"Clinical_Messaging"},"iq":{"host":"{{$store.preferences.xmppDomain}}","namespace":"urn:commontime:infinity:muc"},"mucHost":"conference.{{$store.preferences.xmppDomain}}","uploadHost":"upload.{{$store.preferences.xmppDomain}}","enablePing":true,"pingInterval":"{{$store.preferences.xmppPingInterval}}","pingTimeout":"{{$store.preferences.xmppPingTimeout}}","loginTimeout":60000,"autoLogin":true,"autoReconnect":true,"useChatMarkers":true,"maxMessageAge":-1,"mam":{"enabled":true},"encryption":true,"fileEncryption":true,"authAttachments":true,"alwaysSendPresence":true,"sleepingBeauty":true},"behaviour":{"maxSubjectLength":40,"maxDescriptionLength":500,"maxConversationParticipants":"{{$store.preferences.maxParticipants}}","chatEntriesFetchBatchSize":"{{$store.preferences.chatFetchBatchSize}}","photoQuality":"{{$store.preferences.photoQuality}}","enablePriorityConversations":true,"defaultConversationExpiryTTL":3600,"defaultConversationActivityTTL":86400,"maxChatEntriesToStore":30},"priorities":[{"id":"","sortOrder":0,"name":"Standard","colorCode":"#007AC3","autoAlert":false,"alert":false,"descriptionAtTop":false,"userDescription":"","mustAcknowledge":false},{"id":"high","sortOrder":1,"name":"High","colorCode":"#F5BD23","autoAlert":false,"alert":true,"descriptionAtTop":true,"userDescription":"A High priority conversation will create a conversation that must be acknowledged by the recipients.","mustAcknowledge":false},{"id":"urgent","sortOrder":2,"name":"Urgent","colorCode":"#D74736","autoAlert":true,"alert":true,"descriptionAtTop":true,"userDescription":"An Urgent conversation will immediately pop-up on the user's device.","mustAcknowledge":true}],"roles":{"enableRoles":true},"conversationSettings":[{"nick":"test"}],"conversationTypes":[]},"actions":[{"event":"chat-layer-ready","type":"call-actionflow","data":{"name":"on_instance_ready"},"_auto_id_":"d1dcf272-3b37-4cfa-ad41-fc375d0f4248"},{"event":"login","type":"call-actionflow","data":{"name":"on_login"},"_auto_id_":"94d7e1c7-bcc7-4836-b9eb-d2b16703550c"},{"event":"logout","type":"call-actionflow","data":{"name":"on_logout"},"_auto_id_":"eb891e55-00b4-4da9-8382-81d991b4828e"},{"event":"connection-status-change","type":"call-actionflow","data":{"name":"on_connection_status"},"_auto_id_":"6beb43a4-da59-463b-8acb-5697011968a8"},{"event":"chat-notification","type":"call-actionflow","data":{"name":"chat_notification"},"_auto_id_":"e4db4b43-ac2c-421e-808c-d97eec323425"},{"event":"force-quit-conversation","type":"call-actionflow","data":{"name":"on_removed_from_conversation"},"_auto_id_":"234a5ab4-9ab9-446c-a110-5ee02841e511"},{"event":"chat-mute","type":"stop-audio","data":{},"_auto_id_":"5804fed2-e915-4aac-9d15-2a2af1bb3e2c"},{"event":"chat-layer-ready","type":"call-actionflow","data":{"name":"on_auto_reconnected"},"_auto_id_":"f848ce21-bfa3-40c8-a300-2c553540db12"},{"event":"move-task-to-back","type":"move-task-to-back","data":{},"_auto_id_":"6d207dd6-ef5a-4be7-bf9f-a080ec99c83f"}],"_auto_id_":"e1b0f908-9398-45c0-8051-543d445359fb"},{"name":"device_notification","type":"notification","item-type":"device-notification","_auto_id_":"d4a18b1c-6a77-4ce8-8a8c-e37dc394878d","interactions":[],"actions":[],"text":"You have new notification(s)"},{"name":"app_notification","type":"notification","item-type":"app-notification","_auto_id_":"06ccf289-f90d-40d5-8bbb-40d5edd575b1","options":{"autoDismiss":true,"progressBar":false,"maxOne":false},"style":"info","text":"You have new notification(s)","actions":[]},{"name":"default_urgent_volume","type":"scripting","item-type":"variable","_auto_id_":"f66e8663-c589-45a7-bcee-17be77812f49","variable-type":"int","value":"100"},{"name":"debugLog","type":"scripting","item-type":"function","sync":false,"params":[],"content":"if (cti.store.preferences.debugMode === \"true\") {\n  var params = Array.prototype.slice.call(arguments);\n  console.log.apply(console.log, params);\n}\n","_auto_id_":"37755a0f-2d42-47b9-917f-d70331f1851d"},{"name":"setupLoginForm","type":"scripting","item-type":"function","_auto_id_":"ea644021-b05b-403c-b544-bc2e9a7e0212","sync":false,"params":[],"content":"let attempts = 0;\nsetTimeout(() => testReadiness(), 500);\nfunction testReadiness() {\n  attempts += 1;\n  if (attempts === 10) {\n    alert(\"Unable to find window.CtChatLayer\");\n    return;\n  }\n  if (window.CtChatLayer) prepareLoginForm();\n  else setTimeout(() => testReadiness(), 250);\n}\nfunction prepareLoginForm() {  \n  window.CtChatLayer.onReady(\"Clinical_Messaging\", () => {\n    let logoTaps = 0;\n    let tapsTimeout = null;\n    const loginPage = document\n      .querySelector(\".login-page\");\n    if (!loginPage) return;\n    const logo = loginPage\n      .querySelector(\".logo\");\n    const loginForm = loginPage\n      .querySelector(\".login-form\");\n    const textBoxes = loginForm\n      .shadowRoot\n      .querySelectorAll(\"ct-textbox\");\n    const loginButton = loginForm\n      .shadowRoot\n      .querySelector(\"ct-button\");\n    textBoxes.forEach(textBox => {\n      const input = textBox\n        .shadowRoot\n        .querySelector(\"input\");\n      input.addEventListener(\"focus\", () => {\n        if (window.innerHeight < 768) hideLogo();\n      });\n      input.addEventListener(\"blur\", () => {\n        restoreLogo();\n      });\n    });\n    function hideLogo() {\n      logo.classList.add(\"vanish\");\n    }\n    function restoreLogo() {\n      logo.classList.remove(\"vanish\");\n    }\n    loginForm.style.opacity = 1;\n    const eventName = cti.store.env.platform.type === \"device\" ? \"touchstart\" : \"click\";\n    logo.addEventListener(eventName, () => {\n      clearTimeout(tapsTimeout);\n      tapsTimeout = setTimeout(() => {\n        taps = 0;\n      }, 400);\n      logoTaps += 1;\n      if (logoTaps === 2) {\n        clearTimeout(tapsTimeout);\n        cti.utils.callActionflow(\"show_qa_page\");\n        logoTaps = 0;\n      }\n    });\n  });\n}","actions":[]},{"name":"stored_volume","type":"scripting","item-type":"variable","_auto_id_":"0f352444-2c71-4525-a94c-9a9839e19212","variable-type":"int"},{"name":"in_alert","type":"scripting","item-type":"variable","_auto_id_":"72d84acc-9e16-4531-bdc4-8c63f8016e60","variable-type":"boolean","value":"false"},{"name":"stored_message","type":"scripting","item-type":"variable","_auto_id_":"bdeeae0f-78b5-42ed-b129-7c96c1281374","variable-type":"string"},{"name":"currently_alerting","type":"scripting","item-type":"variable","_auto_id_":"dbda3f6c-6dd0-4f1d-a7db-ffd5ff833ead","variable-type":"boolean","value":"false"},{"name":"pushTs","type":"scripting","item-type":"variable","_auto_id_":"ac85abaf-c4dc-4b4e-829a-e9cfa65a7936","variable-type":"int","value":"0"},{"name":"pageTs","type":"scripting","item-type":"variable","_auto_id_":"04cef4d5-c6fe-4252-a7a7-0073495ce26a","variable-type":"int","value":"0"},{"name":"debug","type":"scripting","item-type":"variable","_auto_id_":"923a22fc-2e94-4891-9f3d-4048e5f2ff50","variable-type":"boolean","value":"true"}],"components":[],"id":"3a2e8c97-8f7e-4f6d-94a9-dcec1de59b90","name":"GOSH_Hosted_Resp","packageId":"com.cti.unified.goshtemp","metadata":{"6b8051c6-7d89-4903-bb83-893cb3ddd71e":{"value":"false","key":"debugMode","externallyConfigurable":true},"91f13824-6aa3-46e8-8b84-1a88ffb47044":{"value":"false","key":"qaMode","externallyConfigurable":true},"b4b47657-e96c-4409-8ebc-045ddc9fe284":{"value":"wss://gosh.cti-paging.com:443/websocket","key":"xmppUrl","externallyConfigurable":true},"b24aff90-4008-44f0-b660-aee3b4bf77e5":{"value":"ctclinmsg.com","key":"xmppDomain","externallyConfigurable":true},"71e9a46f-1722-4131-a000-10ee2e7eb65c":{"value":"60000","key":"xmppPingInterval","externallyConfigurable":true},"c39f1fef-1e84-4638-af64-6d1ba1b3f401":{"value":"10000","key":"xmppPingTimeout","externallyConfigurable":true},"1b076d61-3323-41c1-acdb-98725e71bfdc":{"value":"120","key":"maxParticipants","externallyConfigurable":true},"3263d149-2f20-4504-bd27-06803bc662dd":{"value":"120","key":"showParticipantCountFrom","externallyConfigurable":true},"31413d5f-d331-4bf4-873a-25929fbca649":{"value":"10","key":"chatFetchBatchSize","externallyConfigurable":true},"259822a1-32d7-463b-a10c-bfabd54994af":{"value":"80","key":"photoQuality","externallyConfigurable":true},"b3cdb4a5-09b7-4c1f-b2dc-05a4ed539a7d":{"value":"5000","key":"disableInsomniaDelay","externallyConfigurable":true},"2656364f-e4da-41d0-a9e1-aa5cfeaa6398":{"value":"60000","key":"insomniaLimit","externallyConfigurable":true},"87994c37-77d3-4e5a-97ab-f47c41ae94bb":{"value":"#000000","key":"statusBarColor","externallyConfigurable":true},"0d25cb46-14b1-4fa5-828b-3911f13db57a":{"value":"","key":"productBuildNumber","externallyConfigurable":false},"c8f36e3e-f748-4bfa-93d2-98e3979b882a":{"value":"GOSH (Hosted) 1.3.1","key":"customerReleaseNumber","externallyConfigurable":false},"e1ce1c89-cfb5-4b29-9d50-87489a812930":{"value":"R1","key":"appBuildNumber","externallyConfigurable":false}},"displayName":"Clinical Messaging","icondata":"App Icon With Background - for App Icon).png","buildInfo":{"version":"dev","build":212},"jwt":"eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcHBfaWQiOiIzYTJlOGM5Ny04ZjdlLTRmNmQtOTRhOS1kY2VjMWRlNTliOTAiLCJhcHBfbmFtZSI6IkdPU0hfSG9zdGVkX1Jlc3AiLCJidWlsZF9pZCI6IjJlZWM0NzM5LTA1MWMtNDcxYi1iN2MwLWFmNzAwNzFlMTY0NiIsImNsaWVudF9pZCI6IjExNDI1MGFlLTdjNmEtNGNhYy1iNjdjLTY3OTkzYWU0YjMxYyIsImNsaWVudF9zZWNyZXQiOiJTelZETUhvcmNWbFVjbmRoYlV3NVlWUXdlbFprWnowOSIsImV4cCI6MjMzMTQxNzYwMCwiZnJlcXVlbmN5IjoibmV2ZXIiLCJoYXNoIjoiYTNjYjVhNjQ2ODZhNTlkOTgxYWNlNTc0ZGY2ODg0ZjU0NzhiOWYyZTcxM2IyZGE0OWMzNTQyY2FkYTNjOWU3ZSIsImxpY19leHAiOjIzMjg4MjU2MDAsImxwX2lkIjoiOWYxZTI4ODEtYzM3Mi00YTU1LTk5YTYtMjE3MThmOTU5ZDc4IiwicGFja2FnZV9pZCI6ImNvbS5jdGkudW5pZmllZC5nb3NodGVtcCIsInJlZnJlc2hfdG9rZW4iOiJkbTV5TTBOaVlVTk9ibkJtTVdkdU9WSnJkVGRxVFZkWlFVaDNSems0WkhGd1YxbDZlREE1ZW10VVdUMD0iLCJ0eXBlIjoiZnVsbCIsImlhdCI6MTU3MjQ0OTc0N30.j9z5iezcDP2WuZ5i2uhrH885jWyKu_P86xdpLv_vOHRB2NuOtB_D7w8gfo9fmcaFQwiRtoBYzTJ2iIlycPekGnqm1i-OSaVL18nYfBgKI-x87EUkKCD69ydHdWHIiIGhzyHoEzdBfDAIh_q_IL546tABllLiCohNpN1SeCGZ9li0POPOj-0BDqMM-rnhGf-uwyF4G91uBuIVHxr45j1B7fSf6M2uW32cYaz4TuRyHVITPzds_8BjlkbVbMWXieEvRZNtQnI-YfOq2jvGTvZ5XNB3soBxI3aDgnXkMo4kHpzxYe8rJXgDMSCPEh8HbWxAcXzkGDbSUTuK_VsIWJptTg","buildId":"2eec4739-051c-471b-b7c0-af70071e1646","hostContext":0}